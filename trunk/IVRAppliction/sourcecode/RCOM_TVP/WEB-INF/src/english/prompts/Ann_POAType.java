/**
 * Last generated by Orchestration Designer at: 2016-SEP-16  02:38:22 PM
 */
package english.prompts;

import com.avaya.sce.runtimecommon.ITraceInfo;
import com.avaya.sce.runtimecommon.SCESession;
import com.hp.utilities.IVRConstants;
import com.hp.utilities.TVP_Properties;
import com.servion.util.StackTrace;

import flow.IProjectVariables;

public class Ann_POAType extends com.avaya.sce.runtime.Prompt {

	//{{START:CLASS:FIELDS
	//}}END:CLASS:FIELDS

	/**
	 * Constructor for Ann_POAType.
	 */
	public Ann_POAType() {
		//{{START:CLASS:CONSTRUCTOR
		super();
		//}}END:CLASS:CONSTRUCTOR
	}


	/**
	 * This method is generated automatically and should not be manually edited
	 * To manually edit the prompt, override:
	 * void updatePrompt()
	 * Last generated by Orchestration Designer at: 2017-JUL-12  01:45:44 PM
	 */
	public void buildPrompt(){
		com.avaya.sce.runtime.Format format = null;
		com.avaya.sce.runtime.RenderHint hint = null;
		com.avaya.sce.runtime.MediaPage mediaPage = null;
		setBarginType(com.avaya.sce.runtimecommon.SCERT.BARGIN_SPEECH);
		setName("Ann_POAType");
		setOrder(com.avaya.sce.runtime.Prompt.STANDARD);

		// Prompt level 1
		setTimeout(1,8000);
		setBargin(1,true);

	}


	@Override
	public void updatePrompt(SCESession mySession) {
		// TODO Auto-generated method stub
		super.updatePrompt(mySession);
		String configFilePath		= IVRConstants.EMPTY_QUOTES;
		String waveFiles			= IVRConstants.EMPTY_QUOTES;
		String waveFilePath			= IVRConstants.EMPTY_QUOTES;
		String totalIDs				= IVRConstants.EMPTY_QUOTES;
		String phrasePath			= IVRConstants.EMPTY_QUOTES;	
		String language				= IVRConstants.EMPTY_QUOTES;	
		String pressOptionWaveFile	= IVRConstants.EMPTY_QUOTES;
		String pressOptionODVar	= IVRConstants.EMPTY_QUOTES;
		
		String[] arrPOA		= null;
		TVP_Properties TVP_Prop = null;
		ITraceInfo itraceInfo  = mySession.getTraceOutput();
		int intIDs		= 0;
		try
		{
		configFilePath = mySession.getVariableField(IProjectVariables.VAR__CONFIG,IProjectVariables.VAR__CONFIG_FIELD_CONFIG_FILE_PATH).getStringValue();
		phrasePath	   = mySession.getVariableField(IProjectVariables.VAR__PHRASES, IProjectVariables.VAR__PHRASES_FIELD_STATIC__URL).getStringValue();
		pressOptionODVar = mySession.getVariableField(IProjectVariables.VAR__LANGUAGES, IProjectVariables.VAR__LANGUAGES_FIELD_PRESS__WAVE__FILENAME).getStringValue();
		itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "phrasePath :"+phrasePath);
		language	   = mySession.getVariableField(IProjectVariables.CALL_INFO,IProjectVariables.CALL_INFO_FIELD_CURRENT_LANGUAGE).getStringValue();
		itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "language :"+language);
		TVP_Prop	   = TVP_Properties.getInstance(configFilePath,mySession);
		waveFiles	   = TVP_Prop.getProperty(mySession, IVRConstants.POAWaveFiles).trim();
		itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "POAWave Files **:"+waveFiles);
		arrPOA         = waveFiles.split(",");
		itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "totalIDs :"+arrPOA.length);
		
		for (int i=0;i<arrPOA.length;i++)
		{
			pressOptionWaveFile = pressOptionODVar;
			itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "pressOptionWaveFile:"+pressOptionWaveFile);
			waveFilePath = phrasePath + language + IVRConstants.SLASH + IVRConstants.STATIC + IVRConstants.SLASH + arrPOA[i];
			mySession.getVariableField(IProjectVariables.TVP__POATYPE,IVRConstants.ann_POA_+(i+1)).setValue(waveFilePath);
			add(1, new com.avaya.sce.runtime.PhraseVariableElement("TVP_POAType:ann_POA_" + Integer.toString(i+1), com.avaya.sce.runtime.PhraseVariableElement.Type.AUDIO_URL,false));
			
			//Forming the press 1,  Press 2 etc Options.s
			
			pressOptionWaveFile += Integer.toString(i+1).trim() + IVRConstants.EXT_WAVE; //This will form the complete wave file name. Eg: 45000.wav
			waveFilePath = phrasePath + language + IVRConstants.SLASH + IVRConstants.STATIC + IVRConstants.SLASH  + pressOptionWaveFile;
			itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "# Announcing press option file path:" + waveFilePath);
			mySession.getVariableField(IProjectVariables.VAR__LANGUAGES, IVRConstants.PRESS_OPTION_ + Integer.toString(i+1)).setValue(waveFilePath);
			add(1, new com.avaya.sce.runtime.PhraseVariableElement("VAR_Languages:press_" + Integer.toString(i+1), com.avaya.sce.runtime.PhraseVariableElement.Type.AUDIO_URL,false));
		
		}
		}
		catch(Exception e){
			itraceInfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "Exception :"+e);
		}
		
		
	}
	
	
}

