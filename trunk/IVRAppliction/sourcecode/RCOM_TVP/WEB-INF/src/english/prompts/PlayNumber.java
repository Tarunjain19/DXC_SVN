/**
 * Last generated by Orchestration Designer at: 2015-NOV-06  03:54:33 PM
 */
package english.prompts;

import com.avaya.sce.runtimecommon.ITraceInfo;
import com.avaya.sce.runtimecommon.SCESession;
import com.hp.utilities.IVRConstants;

import flow.IProjectVariables;

public class PlayNumber extends com.avaya.sce.runtime.Prompt {

	//{{START:CLASS:FIELDS
	//}}END:CLASS:FIELDS

	/**
	 * Constructor for PlayNumber.
	 */
	public PlayNumber() {
		//{{START:CLASS:CONSTRUCTOR
		super();
		//}}END:CLASS:CONSTRUCTOR
	}


	/**
	 * This method is generated automatically and should not be manually edited
	 * To manually edit the prompt, override:
	 * void updatePrompt()
	 * Last generated by Orchestration Designer at: 2017-JUL-12  01:45:43 PM
	 */
	public void buildPrompt(){
		com.avaya.sce.runtime.Format format = null;
		com.avaya.sce.runtime.RenderHint hint = null;
		com.avaya.sce.runtime.MediaPage mediaPage = null;
		setBarginType(com.avaya.sce.runtimecommon.SCERT.BARGIN_SPEECH);
		setName("PlayNumber");
		setOrder(com.avaya.sce.runtime.Prompt.STANDARD);

		// Prompt level 1
		setTimeout(1,8000);
		setBargin(1,true);

	}
	
	@Override
	public void updatePrompt(SCESession mySession) {
		// TODO Auto-generated method stub
		super.updatePrompt(mySession);
super.updatePrompt(mySession);
		
		String staticURL	= IVRConstants.EMPTY_QUOTES;
		String phraseURL	= IVRConstants.EMPTY_QUOTES;
		String cur_Language	= IVRConstants.EMPTY_QUOTES;
		String strPlayNum	= IVRConstants.EMPTY_QUOTES;
		String strnumberWavFile	= IVRConstants.EMPTY_QUOTES;
		int eid_Length 		= IVRConstants.ZERO;
		
		ITraceInfo itraceinfo = mySession.getTraceOutput();
		
		try{
			
			strPlayNum 	= mySession.getVariableField(IProjectVariables.TVP__VARS, IProjectVariables.TVP__VARS_FIELD_PLAY_NUMBER).getStringValue();
			staticURL	=	mySession.getVariableField(IProjectVariables.VAR__PHRASES, IProjectVariables.VAR__PHRASES_FIELD_STATIC__URL).getStringValue();
			cur_Language	= mySession.getVariableField(IProjectVariables.CALL_INFO, IProjectVariables.CALL_INFO_FIELD_CURRENT_LANGUAGE).getStringValue();
			eid_Length = strPlayNum.length();
			staticURL = staticURL.concat(cur_Language);
			staticURL = staticURL.concat(IVRConstants.SLASH);
			staticURL = staticURL.concat(IVRConstants.STATIC);
			System.out.println("StaticUrl formed in PlayNumber:"+staticURL);
			staticURL = staticURL.concat(IVRConstants.SLASH);
			strnumberWavFile = mySession.getVariableField(IProjectVariables.VAR__LANGUAGES,IProjectVariables.VAR__LANGUAGES_FIELD_NUMBER__WAVE__FILENAME).getStringValue();
			itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "#Play Number:" + mySession.getVariableField(IProjectVariables.TVP__VARS, IProjectVariables.TVP__VARS_FIELD_PLAY_NUMBER).getStringValue());
			itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "#eid_Length:" + eid_Length);
			itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "#staticURL:" + staticURL);
			itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "#strPlayNum:" + strPlayNum);
			itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "#FirstPartwavefile for number play:"+mySession.getVariableField(IProjectVariables.VAR__LANGUAGES,IProjectVariables.VAR__LANGUAGES_FIELD_NUMBER__WAVE__FILENAME).getStringValue());
			
			
			if(eid_Length > 0){
				
				for(int count = 0; count < eid_Length; count++){
					
					phraseURL = staticURL + strnumberWavFile+ strPlayNum.charAt(count)+ IVRConstants.EXT_WAVE;
					itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_DEBUG, "#phrase url formedin NumberPlay:" + phraseURL);
					System.out.println("Count   "+count);
					mySession.getVariableField(IProjectVariables.VAR__DIGIT__BY__DIGIT, IVRConstants.DIGIT_ + Integer.toString(count)).setValue(phraseURL);
					System.out.println("11111");
					add(1, new com.avaya.sce.runtime.PhraseVariableElement("VAR_DIGIT_BY_DIGIT:DIGIT_" + Integer.toString(count), com.avaya.sce.runtime.PhraseVariableElement.Type.AUDIO_URL,false));
				}
				
			}
			
		}catch(Exception e){
			
			itraceinfo.writeln(ITraceInfo.TRACE_LEVEL_ERROR, "#Exceptin Occured During Play EID Digit by Digit:" + phraseURL + ":" + e);
		}
 }

	
}
